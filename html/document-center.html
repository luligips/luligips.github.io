<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#004aaf" />
    <meta http-equiv="refresh" content="1200; url=/index.html">
    <title>Luli Gips</title>
    <link rel="stylesheet" type="text/css" href="../style/style.css" />
    <script src="https://kit.fontawesome.com/25190ce31d.js" crossorigin="anonymous"></script>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <link rel="icon" href="../images/icon.png">
</head>
<body>

    <div id="mySidebar" class="sidebar">
        <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
        <a href="/index.html">Kryefaqja</a>
        <a href="../html/gips.html">Gips</a>
        <a href="../html/bojera.html">Bojera</a>
        <a href="../html/kcs.html">KCS(Tavanet e varura)</a>
        <a href="../html/kapot.html">Kapot</a>        
        <a href="../html/pft.html">PFT</a>
        <a href="../html/kontakto.html">Kontakto</a>
      </div>
    <div class="header">
        <div class="logo" id="logo">
            <a href="/index.html"><img src="../images/luligips.png" alt=""></a>
        </div>
        <div class="links" id="links">
            <a href="/index.html" class="border">Kryefaqja</a>
            <div class="dropdown-btn">
                <a class="produkte">Produkte<i class="fa fa-angle-down" aria-hidden="true" style="margin: 2px;"></i></a>
                    <div class="dropdown">
                        <a href="../html/gips.html">Gips</a>
                        <a href="../html/bojera.html">Bojera</a>
                        <a href="../html/kcs.html">KCS(Tavanet e varura)</a>
                        <a href="../html/kapot.html">Kapot</a>
                        <a href="../html/pft.html">PFT</a>
                    </div>
            </div>
            <a href="../html/kontakto.html" class="border">Kontakto</a>
        </div>
        
        <div id="main">
            <button class="openbtn" onclick="openNav()">&#9776;</button>
        </div>
        
    </div>

    <div class="search">
        <input type="text" id="searchInput" placeholder="Search PDFs..." class="search-input">
    </div>

    <div class="file-list" id="fileList">Loading</div>

    <button class="toTop" id="toTop" onclick="toTop()"><i class="fas fa-angle-up"></i></button>


    <div class="footer">
        <div class="nav-bar">
            <a href="/index.html">Kryefaqja</a><div class="vl"></div><a href="../html/kontakto.html">Kontakto</a>
        </div>
        <div class="social">
            <a href="https://www.instagram.com/luli.gips/?igshid=MmU2YjMzNjRlOQ%3D%3D" target="_blank" rel="noopener noreferrer"><i class="fab fa-instagram"></i></a>
            <a href="https://www.facebook.com/luligip/" target="_blank" rel="noopener noreferrer"><i class="fab fa-facebook-square"></i></a>
        </div>
        <div>
            <h5>Copyright &copy; 2023|Luli Gips All rights reserved.</h5>
        </div>
    </div>
    <script>
      let files = [];
    
      async function fetchFiles() {
        try {
          const res = await fetch('https://gentylli-github-io.onrender.com/api/files');
          files = await res.json();
          render(files);
        } catch (err) {
          document.getElementById('fileList').innerHTML = '<p>Error loading files.</p>';
          console.error(err);
        }
      }
      const BACKEND_URL = 'https://gentylli-github-io.onrender.com';

function render(list) {
  const out = document.getElementById('fileList');
  if (!out) return console.error("Missing #fileList element.");

  if (!list.length) {
    out.innerHTML = '<p>No documents found.</p>';
    return;
  }

  out.innerHTML = '';
  list.forEach(f => {
    const div = document.createElement('div');
    div.className = 'file-item';

    div.innerHTML = `
      <div class="file-info">
        <div class="file-text">
          <div class="file-title">
            <a class="file-link" target="_blank" href="/files/${encodeURIComponent(f.name)}">${f.name}</a>
          </div>
        </div>
      </div>
      <div class="file-meta">
        <span>PDF</span>
        <span>${f.size}</span>
        <a href="/files/${encodeURIComponent(f.name)}" class="download-btn" title="Download" download>
          <i class="fa-solid fa-download"></i>
        </a>
      </div>
    `;
    out.appendChild(div);
  });
}

    
      document.addEventListener('DOMContentLoaded', () => {
        document.getElementById('searchInput')?.addEventListener('input', e => {
          const q = e.target.value.toLowerCase();
          render(files.filter(f => f.name.toLowerCase().includes(q)));
        });
    
        fetchFiles();
      });
    </script>
    
    <script src="../js/js.js"></script>
</body>

</html>
